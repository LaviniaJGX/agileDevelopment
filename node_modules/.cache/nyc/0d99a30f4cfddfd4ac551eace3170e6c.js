let express = require('express');
let router = express.Router();
var Course = require('../models/courses');

//find all courses in database
router.findAll = (req, res) => {
    // Return a JSON representation of our list
    res.setHeader('Content-Type', 'application/json');
    Course.find(function (err, courses) {
        if (err) res.send(err);else res.send(JSON.stringify(courses, null, 5));
    });
};

//find certain course by id:
router.findById = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    Course.find({ "_id": req.params.id }, function (err, courses) {
        if (err) {
            res.status(404);
            res.send({ message: "Invalid id or teacherName,Do not match!" });
        } else if (courses[0].teacherType === "admin" || courses[0].teacherName === req.params.teacherName) {
            res.send(JSON.stringify(courses, null, 5));
        } else if (courses[0].teacherType === "admin") {
            res.send(JSON.stringify(courses, null, 5));
        } else {
            res.json('You are not the administrant ! You can not see all courses!');
        };
    });
};

function getTotalNumbers(array) {
    let totalNumbers = 0;
    array.forEach(function (obj) {
        totalNumbers += obj.classHours;
    });
    return totalNumbers;
}

router.findTotalNumbers = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    Course.find(function (err, courses) {
        if (err) {
            res.status(404);
            res.send(err);
        } else res.json([{ totalNumbers: getTotalNumbers(courses) }]);
    });
};

function getTotalHours(array) {
    let totalHours = 0;
    array.forEach(function (obj) {
        totalHours += obj.classHours;
    });
    return totalHours;
}

router.findTotalHours = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    Course.find(function (err, courses) {
        if (err) {
            res.status(404);
            res.send(err);
        } else res.json([{ totalHours: getTotalHours(courses) }]);
    });
};

router.findByElements = (req, res) => {
    //fuzzy search
    res.setHeader('Content-Type', 'application/json');
    var keyword = { 'courseTitle': { $regex: req.params.courseTitle, $options: 'i' } };
    Course.find(keyword, function (err, courses) {
        if (courses.length <= 0) {
            res.status(404);
            res.json({ message: 'Course Not Found!!' });
        } else res.send(JSON.stringify(courses, null, 5));
    });
};

function getByValue(array, id) {
    var result = array.filter(function (obj) {
        return obj.id == id;
    });
    return result ? result[0] : null; // or undefined
}
//add course
router.addCourse = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    var course = new Course();

    course.courseTitle = req.body.courseTitle; // the requested value
    course.classHours = req.body.classHours; // the requested value
    course.studentNumbers = req.body.studentNumbers;
    course.studentCategory = req.body.studentCategory;
    course.teacherName = req.body.teacherName;
    course.teacherType = req.body.teacherType;

    if (req.body.courseTitle != null && req.body.classHours != null && req.body.studentNumbers != null && req.body.studentCategory != null && req.body.teacherName != null && req.body.teacherType != null) {
        course.save(function (err) {
            if (err) res.json({ message: 'Course NOT Added!', errmsg: err });
            // return a suitable error message
            else {
                    res.json({ message: 'Course Added Successfully!', data: course });
                }
            // return a suitable success message
        });
    } else {
        res.json('Wrong Properties!');
    }
};

router.changeCertainHours = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    Course.find({ teacherName: req.params.teacherName }, function (err, courses) {
        if (err) {
            res.send(err);
        } else if (courses[0].teacherType === "admin") {
            var conditions = { _id: req.params.id },
                update = { classHours: req.body.classHours };
            var query = { _id: req.params.id };
            Course.updateMany(query, { classHours: req.body.classHours }, function (err, courses) {
                //console.log(allCourses);
                if (err) {
                    res.status(404);
                    res.json({ message: 'Course NOT Found! ', errmsg: err });
                } else {
                    res.json('ClassHours changed successfully!');
                }
            });
        } else {
            res.json({ message: 'You have no right!' });
        }
    });
};

router.changeCertainNumbers = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    Course.find({ teacherName: req.params.teacherName }, function (err, courses) {
        if (err) {
            res.send(err);
        } else if (courses[0].teacherType === "admin") {
            var query = { _id: req.params.id };
            Course.updateMany(query, { studentNumbers: req.body.studentNumbers }, function (err, courses) {
                //console.log(allCourses);
                if (err) {
                    res.status(404);
                    res.json({ message: 'Course NOT Found! ', errmsg: err });
                } else {
                    res.json('StudentNumbers changed successfully!');
                }
            });
        } else {
            res.json({ message: 'You have no right!' });
        }
    });
};

//change teacher
router.changeCertainTeacher = (req, res) => {
    res.setHeader('Content-Type', 'application/json');
    Course.find({ teacherName: req.params.teacherName }, function (err, courses) {
        if (err) {
            res.send(err);
        } else if (courses[0].teacherType === "admin") {
            var query = { _id: req.params.id };
            Course.updateMany(query, { teacherName: req.body.teacherName }, function (err, courses) {
                //console.log(allCourses);
                if (err) {
                    res.status(404);
                    res.json({ message: 'Course NOT Found! ', errmsg: err });
                } else {
                    res.json('Teachers changed successfully!');
                }
            });
        } else {
            res.json('You have no right!');
        }
    });
};

//delete Course by its id;
router.deleteCourse = (req, res) => {

    Course.findByIdAndRemove(req.params.id, function (err) {
        if (err) {
            res.status(404);
            res.json({ message: 'Course NOT Deleted!', errmsg: err });
        } else res.json({ message: 'Course Successfully Deleted!' });
    });
};

module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZXMuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJDb3Vyc2UiLCJmaW5kQWxsIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwiZmluZCIsImVyciIsImNvdXJzZXMiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdGF0dXMiLCJtZXNzYWdlIiwidGVhY2hlclR5cGUiLCJ0ZWFjaGVyTmFtZSIsImpzb24iLCJnZXRUb3RhbE51bWJlcnMiLCJhcnJheSIsInRvdGFsTnVtYmVycyIsImZvckVhY2giLCJvYmoiLCJjbGFzc0hvdXJzIiwiZmluZFRvdGFsTnVtYmVycyIsImdldFRvdGFsSG91cnMiLCJ0b3RhbEhvdXJzIiwiZmluZFRvdGFsSG91cnMiLCJmaW5kQnlFbGVtZW50cyIsImtleXdvcmQiLCIkcmVnZXgiLCJjb3Vyc2VUaXRsZSIsIiRvcHRpb25zIiwibGVuZ3RoIiwiZ2V0QnlWYWx1ZSIsInJlc3VsdCIsImZpbHRlciIsImFkZENvdXJzZSIsImNvdXJzZSIsImJvZHkiLCJzdHVkZW50TnVtYmVycyIsInN0dWRlbnRDYXRlZ29yeSIsInNhdmUiLCJlcnJtc2ciLCJkYXRhIiwiY2hhbmdlQ2VydGFpbkhvdXJzIiwiY29uZGl0aW9ucyIsIl9pZCIsInVwZGF0ZSIsInF1ZXJ5IiwidXBkYXRlTWFueSIsImNoYW5nZUNlcnRhaW5OdW1iZXJzIiwiY2hhbmdlQ2VydGFpblRlYWNoZXIiLCJkZWxldGVDb3Vyc2UiLCJmaW5kQnlJZEFuZFJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFVBQVVDLFFBQVEsU0FBUixDQUFkO0FBQ0EsSUFBSUMsU0FBU0YsUUFBUUcsTUFBUixFQUFiO0FBQ0EsSUFBSUMsU0FBU0gsUUFBUSxtQkFBUixDQUFiOztBQUVBO0FBQ0FDLE9BQU9HLE9BQVAsR0FBaUIsQ0FBQ0MsR0FBRCxF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Y0F5QyxPQUFPQyxPQUFQLEdBQWlCM0QsTUFBakIiLCJmaWxlIjoiY291cnNlcy5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvZGFpbHUvRG9jdW1lbnRzL2hvbWV3b3JrL2VuZGJhY2svY291cnNlc3Rlc3Qvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5sZXQgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnZhciBDb3Vyc2UgPSByZXF1aXJlKCcuLi9tb2RlbHMvY291cnNlcycpO1xuXG4vL2ZpbmQgYWxsIGNvdXJzZXMgaW4gZGF0YWJhc2VcbnJvdXRlci5maW5kQWxsID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgLy8gUmV0dXJuIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBvdXIgbGlzdFxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgQ291cnNlLmZpbmQoZnVuY3Rpb24gKGVyciwgY291cnNlcykge1xuICAgICAgICBpZiAoZXJyKVxuICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoY291cnNlcywgbnVsbCwgNSkpO1xuICAgIH0pO1xufVxuXG4vL2ZpbmQgY2VydGFpbiBjb3Vyc2UgYnkgaWQ6XG5yb3V0ZXIuZmluZEJ5SWQgPSAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIENvdXJzZS5maW5kKHsgXCJfaWRcIjpyZXEucGFyYW1zLmlkfSxmdW5jdGlvbiAoZXJyLCBjb3Vyc2VzKSB7XG4gICAgICAgIGlmIChlcnIpe1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xuICAgICAgICAgICAgcmVzLnNlbmQoe21lc3NhZ2U6XCJJbnZhbGlkIGlkIG9yIHRlYWNoZXJOYW1lLERvIG5vdCBtYXRjaCFcIn0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChjb3Vyc2VzWzBdLnRlYWNoZXJUeXBlPT09XCJhZG1pblwiKXx8KGNvdXJzZXNbMF0udGVhY2hlck5hbWU9PT1yZXEucGFyYW1zLnRlYWNoZXJOYW1lKSkge1xuICAgICAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkoY291cnNlcyxudWxsLDUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb3Vyc2VzWzBdLnRlYWNoZXJUeXBlPT09XCJhZG1pblwiKSB7XG4gICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShjb3Vyc2VzLG51bGwsNSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzLmpzb24oJ1lvdSBhcmUgbm90IHRoZSBhZG1pbmlzdHJhbnQgISBZb3UgY2FuIG5vdCBzZWUgYWxsIGNvdXJzZXMhJyk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gZ2V0VG90YWxOdW1iZXJzKGFycmF5KSB7XG4gICAgbGV0IHRvdGFsTnVtYmVycyA9IDA7XG4gICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihvYmopIHsgdG90YWxOdW1iZXJzICs9IG9iai5jbGFzc0hvdXJzOyB9KTtcbiAgICByZXR1cm4gdG90YWxOdW1iZXJzO1xufVxuXG5yb3V0ZXIuZmluZFRvdGFsTnVtYmVycyA9IChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgQ291cnNlLmZpbmQoZnVuY3Rpb24oZXJyLCBjb3Vyc2VzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KTtcbiAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVzLmpzb24oW3sgdG90YWxOdW1iZXJzIDogZ2V0VG90YWxOdW1iZXJzKGNvdXJzZXMpIH1dKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0VG90YWxIb3VycyhhcnJheSkge1xuICAgIGxldCB0b3RhbEhvdXJzID0gMDtcbiAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKG9iaikgeyB0b3RhbEhvdXJzICs9IG9iai5jbGFzc0hvdXJzOyB9KTtcbiAgICByZXR1cm4gdG90YWxIb3Vycztcbn1cblxucm91dGVyLmZpbmRUb3RhbEhvdXJzID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBDb3Vyc2UuZmluZChmdW5jdGlvbihlcnIsIGNvdXJzZXMpIHtcbiAgICAgICAgaWYgKGVycil7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCk7XG4gICAgICAgICAgICByZXMuc2VuZChlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlcy5qc29uKFt7IHRvdGFsSG91cnMgOiBnZXRUb3RhbEhvdXJzKGNvdXJzZXMpIH1dKTtcbiAgICB9KTtcbn1cblxucm91dGVyLmZpbmRCeUVsZW1lbnRzID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgLy9mdXp6eSBzZWFyY2hcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIHZhciBrZXl3b3JkID0geydjb3Vyc2VUaXRsZSc6IHskcmVnZXg6cmVxLnBhcmFtcy5jb3Vyc2VUaXRsZSwgJG9wdGlvbnM6J2knfX07XG4gICAgQ291cnNlLmZpbmQoa2V5d29yZCwgZnVuY3Rpb24oZXJyLGNvdXJzZXMpIHtcbiAgICAgICAgaWYgKGNvdXJzZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KTtcbiAgICAgICAgICAgIHJlcy5qc29uKHttZXNzYWdlOiAnQ291cnNlIE5vdCBGb3VuZCEhJ30pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KGNvdXJzZXMsbnVsbCw1KSk7XG4gICAgfSk7XG59XG5cblxuZnVuY3Rpb24gZ2V0QnlWYWx1ZShhcnJheSwgaWQpIHtcbiAgICB2YXIgcmVzdWx0ICA9IGFycmF5LmZpbHRlcihmdW5jdGlvbihvYmope3JldHVybiBvYmouaWQgPT0gaWQ7fSApO1xuICAgIHJldHVybiByZXN1bHQgPyByZXN1bHRbMF0gOiBudWxsOyAvLyBvciB1bmRlZmluZWRcbn1cbi8vYWRkIGNvdXJzZVxucm91dGVyLmFkZENvdXJzZSA9IChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgdmFyIGNvdXJzZSA9IG5ldyBDb3Vyc2UoKTtcblxuICAgIGNvdXJzZS5jb3Vyc2VUaXRsZSA9IHJlcS5ib2R5LmNvdXJzZVRpdGxlOy8vIHRoZSByZXF1ZXN0ZWQgdmFsdWVcbiAgICBjb3Vyc2UuY2xhc3NIb3VycyA9IHJlcS5ib2R5LmNsYXNzSG91cnM7Ly8gdGhlIHJlcXVlc3RlZCB2YWx1ZVxuICAgIGNvdXJzZS5zdHVkZW50TnVtYmVycz1yZXEuYm9keS5zdHVkZW50TnVtYmVycztcbiAgICBjb3Vyc2Uuc3R1ZGVudENhdGVnb3J5PXJlcS5ib2R5LnN0dWRlbnRDYXRlZ29yeTtcbiAgICBjb3Vyc2UudGVhY2hlck5hbWU9cmVxLmJvZHkudGVhY2hlck5hbWU7XG4gICAgY291cnNlLnRlYWNoZXJUeXBlPXJlcS5ib2R5LnRlYWNoZXJUeXBlO1xuXG4gICAgaWYoKHJlcS5ib2R5LmNvdXJzZVRpdGxlIT1udWxsKSYmKHJlcS5ib2R5LmNsYXNzSG91cnMhPW51bGwpJiYocmVxLmJvZHkuc3R1ZGVudE51bWJlcnMhPW51bGwpJiYocmVxLmJvZHkuc3R1ZGVudENhdGVnb3J5IT1udWxsKSYmKHJlcS5ib2R5LnRlYWNoZXJOYW1lIT1udWxsKSYmKHJlcS5ib2R5LnRlYWNoZXJUeXBlIT1udWxsKSl7XG4gICAgICAgIGNvdXJzZS5zYXZlKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdDb3Vyc2UgTk9UIEFkZGVkIScsIGVycm1zZyA6IGVycn0pO1xuICAgICAgICAgICAgLy8gcmV0dXJuIGEgc3VpdGFibGUgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdDb3Vyc2UgQWRkZWQgU3VjY2Vzc2Z1bGx5IScsZGF0YTpjb3Vyc2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBhIHN1aXRhYmxlIHN1Y2Nlc3MgbWVzc2FnZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlcy5qc29uKCdXcm9uZyBQcm9wZXJ0aWVzIScpO1xuICAgIH1cbn1cblxucm91dGVyLmNoYW5nZUNlcnRhaW5Ib3VycyA9KHJlcSxyZXMpID0+IHtcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIENvdXJzZS5maW5kKHsgdGVhY2hlck5hbWU6IHJlcS5wYXJhbXMudGVhY2hlck5hbWUgfSxmdW5jdGlvbihlcnIsIGNvdXJzZXMpe1xuICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XG4gICAgICAgIH1lbHNlIGlmKGNvdXJzZXNbMF0udGVhY2hlclR5cGU9PT1cImFkbWluXCIpe1xuICAgICAgICAgICAgdmFyIGNvbmRpdGlvbnMgPSB7IF9pZDogcmVxLnBhcmFtcy5pZCB9ICwgdXBkYXRlID0geyAgY2xhc3NIb3VyczogcmVxLmJvZHkuY2xhc3NIb3VycyB9O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0geyBfaWQ6IHJlcS5wYXJhbXMuaWQgfTtcbiAgICAgICAgICAgIENvdXJzZS51cGRhdGVNYW55KHF1ZXJ5LCB7IGNsYXNzSG91cnM6IHJlcS5ib2R5LmNsYXNzSG91cnN9LGZ1bmN0aW9uIChlcnIsIGNvdXJzZXMpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFsbENvdXJzZXMpO1xuICAgICAgICAgICAgICAgIGlmIChlcnIpe1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHttZXNzYWdlOidDb3Vyc2UgTk9UIEZvdW5kISAnLCBlcnJtc2cgOiBlcnJ9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKCdDbGFzc0hvdXJzIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6J1lvdSBoYXZlIG5vIHJpZ2h0ISd9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59O1xuXG5yb3V0ZXIuY2hhbmdlQ2VydGFpbk51bWJlcnMgPShyZXEscmVzKSA9PiB7XG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBDb3Vyc2UuZmluZCh7IHRlYWNoZXJOYW1lOiByZXEucGFyYW1zLnRlYWNoZXJOYW1lIH0sZnVuY3Rpb24oZXJyLCBjb3Vyc2VzKSB7XG4gICAgICAgIGlmIChlcnIpe1xuICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcbiAgICAgICAgfWVsc2UgaWYoY291cnNlc1swXS50ZWFjaGVyVHlwZT09PVwiYWRtaW5cIil7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB7IF9pZDogcmVxLnBhcmFtcy5pZCB9O1xuICAgICAgICAgICAgQ291cnNlLnVwZGF0ZU1hbnkocXVlcnksIHsgc3R1ZGVudE51bWJlcnM6IHJlcS5ib2R5LnN0dWRlbnROdW1iZXJzfSxmdW5jdGlvbiAoZXJyLCBjb3Vyc2VzKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhbGxDb3Vyc2VzKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTonQ291cnNlIE5PVCBGb3VuZCEgJywgZXJybXNnIDogZXJyfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuanNvbignU3R1ZGVudE51bWJlcnMgY2hhbmdlZCBzdWNjZXNzZnVsbHkhJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTonWW91IGhhdmUgbm8gcmlnaHQhJ30pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vL2NoYW5nZSB0ZWFjaGVyXG5yb3V0ZXIuY2hhbmdlQ2VydGFpblRlYWNoZXIgPShyZXEscmVzKSA9PiB7XG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBDb3Vyc2UuZmluZCh7IHRlYWNoZXJOYW1lOiByZXEucGFyYW1zLnRlYWNoZXJOYW1lIH0sZnVuY3Rpb24oZXJyLCBjb3Vyc2VzKSB7XG4gICAgICAgIGlmIChlcnIpe1xuICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcbiAgICAgICAgfWVsc2UgaWYoY291cnNlc1swXS50ZWFjaGVyVHlwZT09PVwiYWRtaW5cIil7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB7IF9pZDogcmVxLnBhcmFtcy5pZCB9O1xuICAgICAgICAgICAgQ291cnNlLnVwZGF0ZU1hbnkocXVlcnksIHsgdGVhY2hlck5hbWU6IHJlcS5ib2R5LnRlYWNoZXJOYW1lfSxmdW5jdGlvbiAoZXJyLCBjb3Vyc2VzKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhbGxDb3Vyc2VzKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTonQ291cnNlIE5PVCBGb3VuZCEgJywgZXJybXNnIDogZXJyfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuanNvbignVGVhY2hlcnMgY2hhbmdlZCBzdWNjZXNzZnVsbHkhJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5qc29uKCdZb3UgaGF2ZSBubyByaWdodCEnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLy9kZWxldGUgQ291cnNlIGJ5IGl0cyBpZDtcbnJvdXRlci5kZWxldGVDb3Vyc2UgPSAocmVxLCByZXMpID0+IHtcblxuICAgIENvdXJzZS5maW5kQnlJZEFuZFJlbW92ZShyZXEucGFyYW1zLmlkLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xuICAgICAgICAgICAgcmVzLmpzb24oe21lc3NhZ2U6ICdDb3Vyc2UgTk9UIERlbGV0ZWQhJywgZXJybXNnOiBlcnJ9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdDb3Vyc2UgU3VjY2Vzc2Z1bGx5IERlbGV0ZWQhJ30pO1xuICAgIH0pO1xufVxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il19