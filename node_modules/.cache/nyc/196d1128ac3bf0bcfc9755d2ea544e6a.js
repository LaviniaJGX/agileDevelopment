var express = require('express');
var router = express.Router();
var User = require('../models/user');
/* GET users listing. */
router.addUser = function (req, res) {
  res.setHeader('Content-Type', 'application/json');
  // console.log(req.body)
  if (req.body.account && req.body.role) {
    /**
     * role:
     *  1: common
     *  2: admin
     */
    var user = new User({
      account: req.body.account,
      role: req.body.role
    });

    user.save(function (err) {
      if (err) {
        res.json({ message: 'User NOT Added!', errmsg: err });
      } else {
        res.json({ message: 'User Added Successfully!', data: user });
      }
    });
  } else {
    res.json('Wrong Properties!');
  }
};

router.findByAccount = function (req, res) {
  User.find({ "account": req.params.account }, function (err, user) {
    if (err) {
      res.status(404);
      res.send({
        message: "Invalid account,Do not match!"
      });
    } else {
      res.json(user);
    }
  });
};
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiVXNlciIsImFkZFVzZXIiLCJyZXEiLCJyZXMiLCJzZXRIZWFkZXIiLCJib2R5IiwiYWNjb3VudCIsInJvbGUiLCJ1c2VyIiwic2F2ZSIsImVyciIsImpzb24iLCJtZXNzYWdlIiwiZXJybXNnIiwiZGF0YSIsImZpbmRCeUFjY291bnQiLCJmaW5kIiwicGFyYW1zIiwic3RhdHVzIiwic2VuZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFVBQVVDLFFBQVEsU0FBUixDQUFkO0FBQ0EsSUFBSUMsU0FBU0YsUUFBUUcsTUFBUixFQUFiO0FBQ0EsSUFBSUMsT0FBT0gsUUFBUSxnQkFBUixDQUFYO0FBQ0E7QUFDQUMsT0FBT0csT0FBUCxHQUFpQixVQUFVQyxHQUFWLEVBQWNDLEdBQWQsRUFBa0I7QUFDakNBLE1BQUlDLFNBQUosQ0FBYyxjQUFkLEVBQThCLGtCQUE5QjtBQUNBO0FBQ0EsTUFBR0YsSUFBSUcsSUFBSixDQUFTQyxPQUFULElBQWtCSixJQUFJRyxJQUFKLENBQVNFLElBQTlCLEVBQW1DO0FBQ2pDOzs7OztBQUtDLFFBQUlDLE9BQU8sSUFBSVIsSUFBSixDQUFTO0FBQ2xCTSxlQUFTSixJQUFJRyxJQUFKLENBQVNDLE9BREE7QUFFbEJDLFlBQU1MLElBQUlHLElBQUosQ0FBU0U7QUFGRyxLQUFULENBQVg7O0FBS0FDLFNBQUtDLElBQUwsQ0FBVSxVQUFVQyxHQUFWLEVBQWM7QUFDdEIsVUFBR0EsR0FBSCxFQUFPO0FBQ0pQLFlBQUlRLElBQUosQ0FBUyxFQUFFQyxTQUFTLGlCQUFYLEVBQThCQyxRQUFTSCxHQUF2QyxFQUFUO0FBQ0YsT0FGRCxNQUVLO0FBQ0hQLFlBQUlRLElBQUosQ0FBUyxFQUFFQyxTQUFTLDBCQUFYLEVBQXNDRSxNQUFLTixJQUEzQyxFQUFUO0FBQ0Q7QUFFRixLQVBEO0FBUUYsR0FuQkQsTUFtQks7QUFDSEwsUUFBSVEsSUFBSixDQUFTLG1CQUFUO0FBQ0Q7QUFFRixDQTFCRDs7QUE2QkFiLE9BQU9pQixhQUFQLEdBQXVCLFVBQVViLEdBQVYsRUFBY0MsR0FBZCxFQUFrQjtBQUN2Q0gsT0FBS2dCLElBQUwsQ0FBVSxFQUFFLFdBQVVkLElBQUllLE1BQUosQ0FBV1gsT0FBdkIsRUFBVixFQUEwQyxVQUFVSSxHQUFWLEVBQWVGLElBQWYsRUFBb0I7QUFDNUQsUUFBSUUsR0FBSixFQUFTO0FBQ1BQLFVBQUllLE1BQUosQ0FBVyxHQUFYO0FBQ0FmLFVBQUlnQixJQUFKLENBQVM7QUFDUFAsaUJBQVM7QUFERixPQUFUO0FBR0QsS0FMRCxNQUtLO0FBQ0hULFVBQUlRLElBQUosQ0FBU0gsSUFBVDtBQUNEO0FBQ0YsR0FURDtBQVVELENBWEQ7QUFZQVksT0FBT0MsT0FBUCxHQUFpQnZCLE1BQWpCIiwiZmlsZSI6InVzZXJzLmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kYWlsdS9Eb2N1bWVudHMvaG9tZXdvcmsvZW5kYmFjay9jb3Vyc2VzdGVzdC9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xudmFyIFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlcicpXG4vKiBHRVQgdXNlcnMgbGlzdGluZy4gKi9cbnJvdXRlci5hZGRVc2VyID0gZnVuY3Rpb24gKHJlcSxyZXMpe1xuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAvLyBjb25zb2xlLmxvZyhyZXEuYm9keSlcbiAgaWYocmVxLmJvZHkuYWNjb3VudCYmcmVxLmJvZHkucm9sZSl7XG4gICAgLyoqXG4gICAgICogcm9sZTpcbiAgICAgKiAgMTogY29tbW9uXG4gICAgICogIDI6IGFkbWluXG4gICAgICovXG4gICAgIHZhciB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgIGFjY291bnQ6IHJlcS5ib2R5LmFjY291bnQsXG4gICAgICAgcm9sZTogcmVxLmJvZHkucm9sZVxuICAgICB9KVxuXG4gICAgIHVzZXIuc2F2ZShmdW5jdGlvbiAoZXJyKXtcbiAgICAgICBpZihlcnIpe1xuICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1VzZXIgTk9UIEFkZGVkIScsIGVycm1zZyA6IGVycn0pO1xuICAgICAgIH1lbHNle1xuICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnVXNlciBBZGRlZCBTdWNjZXNzZnVsbHkhJyxkYXRhOnVzZXJ9KTtcbiAgICAgICB9XG4gICAgICAgIFxuICAgICB9KVxuICB9ZWxzZXtcbiAgICByZXMuanNvbignV3JvbmcgUHJvcGVydGllcyEnKTtcbiAgfVxuIFxufVxuXG5cbnJvdXRlci5maW5kQnlBY2NvdW50ID0gZnVuY3Rpb24gKHJlcSxyZXMpe1xuICBVc2VyLmZpbmQoeyBcImFjY291bnRcIjpyZXEucGFyYW1zLmFjY291bnR9LGZ1bmN0aW9uIChlcnIsIHVzZXIpe1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KTtcbiAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGFjY291bnQsRG8gbm90IG1hdGNoIVwiXG4gICAgICB9KTtcbiAgICB9ZWxzZXtcbiAgICAgIHJlcy5qc29uKHVzZXIpXG4gICAgfVxuICB9KVxufVxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXX0=